<!DOCTYPE html>
<html lang="no">

<head>
    <meta charset="UTF-8">
    <title>Kinobiletter</title>
</head>

<body>
<h1> Bestilling av kinobiletter</h1>
<h2>Velg film:</h2>
<select id="selectMovie" onchange="chooseMovie()">
    <option>Les Miserables</option>
    <option>Mamma mia</option>
    <option>Chicago</option>
    <option>West side story</option>
</select> <br><br>

Antall :<input type="number" id="antallBiletter"><br>

<br><form id="kundeListe">
    Fornavn: <input type="text" id="fname"><br>
    Etternavn: <input type="text" id="lname"><br>
    Telefonnr: <input type="text" id="phone"><br>
    Adresse: <input type="text" id="adress"><br>

   <br> <input type="button" onclick="addBuyers()" value="Kjop billetter"><br>
</form>
<h2>Alle billeter</h2>

<div id="buyerInfoContainer"></div>

<input type="button" onclick="deletePeople()" value="Slett alle biletter">

<!-- Container to display buyer information -->


<script type="application/javascript">
    const buyersList = [];

    function chooseMovie() {
        alert("Movie chosen: " + document.getElementById("selectMovie").value);
    }

    function addBuyers() {
        let name = document.getElementById("fname").value;
        let lname = document.getElementById("lname").value;
        let phone = document.getElementById("phone").value;
        let adress = document.getElementById("adress").value;

        let strin1 = document.getElementById("antallBiletter").value;
        let num1 = Number(strin1);

        if (isNaN(num1) || num1 <= 0) {
            alert("Invalid number of tickets. Please enter a valid number.");
            return;
        }

        let person = {
            name: name,
            lastname: lname,
            phone: phone,
            address: adress,
            numTickets: num1
        };

        buyersList.push(person);

        // Call visPersonRegister function after adding buyers
        visPersonRegister();

        document.getElementById("fname").value = "";
        document.getElementById("lname").value = "";
        document.getElementById("phone").value = "";
        document.getElementById("adress").value = "";
        document.getElementById("antallBiletter").value = "";

    }

    function visPersonRegister() {
        let container = document.getElementById("buyerInfoContainer");
        let tableHtml = "<table><tr>" +
            "<th>Name</th><th>Last Name</th><th>Address</th><th>Phone</th><th>Tickets</th>" +
            "</tr>";

        for (let person of buyersList) {
            tableHtml += "<tr>" +
                "<td>" + person.name + "</td>" +
                "<td>" + person.lastname + "</td>" +
                "<td>" + person.address + "</td>" +
                "<td>" + person.phone + "</td>" +
                "<td>" + person.numTickets + "</td>" +
                "</tr>";
        }

        tableHtml += "</table>";
        container.innerHTML = tableHtml;
    }
   



    function deletePeople() {
        while (buyersList.length > 0) {
            buyersList.pop();
        }

        // Update the displayed buyer information
        visPersonRegister();


    }
</script>
</body>

</html>

